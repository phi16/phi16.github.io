<!doctype html>
<html>
<head>
  <title>Reali-nertia | phi16</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="target-densitydpi=device-dpi, width=device-width, minimum-scale=0.54, maximum-scale=2.0, user-scalable=yes">
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>
  <link href="https://fonts.googleapis.com/css?family=Berkshire+Swash" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Open+Sans" rel="stylesheet" type="text/css">
  <link href="https://fonts.googleapis.com/css?family=Inconsolata" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js"></script>
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
  <script type="text/javascript">
  function procExt(s){
    return s.replace(/(http[^\s\n]*)/g,"&nbsp;<a href=\"$1\">$1</a>&nbsp;").replace(/\n/g,"<br>");
  }
  </script>
  <script type="text/javascript" src="/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
  <link rel="stylesheet" href="/fancybox/jquery.fancybox-1.3.4.css" type="text/css" media="screen" />
  <link rel="stylesheet" href="/index.css">
</head>

<body>
  <div class="container">
    <div id="main" role="main">
      <div id="site">
        <div id="header">
          <a href="/"><h1>Portfolio</h1></a>
          <div id="sideS">/ phi16</div>
        </div>
        <div class="widget">
          <div class="title">Works</div>
          <div class="indent" id="works">
            <div class="stat"></div>
            <div id="elems"></div>
          </div>
        </div>
        <div class="widget">
          <div class="title">Activity</div>
          <div class="indent">
            <div class="stat"></div>
            対外的な活動
            <ul>
              <li>
                <a href="http://xrarchi.org/vraa1/">VR Architecture Award 01</a> モスコミュール賞<br>
              </li>
              <li>
                <a href="https://neort.io/story/helloneoshibuya">NEORT</a>さんより 渋谷駅地下で展示<br>
                <a href="https://twitter.com/phi16_/status/1190487389132607494">バーチャル浴衣柄を置かせて頂きました。</a>
              </li>
            </ul>
          </div>
        </div>
        <div id="footer"></div>
      </div>
    </div>
  </div>
  <script type="text/javascript">
  $(document).ready(_=>{
    const data = [
      {id:"moy",title:"Catan (Windows C++)",desc:"カタンをおうちでやりたかった。もってない。\n大好き線画3D、ぐるぐる動くよ！結構グラフィック綺麗でいい感じ。\nネットワーク周りにバグ多すぎて公開できない。ゲーム終了つくってないし。"},
      {id:"poi", title:"ねるねるねるね (Android Java) https://play.google.com/store/apps/details?id=phi16.neruneru",desc:"wonderflで昔つくった「る」に棒を指すだけ版のあとでできてしまった。\n元々ただのネタゲーだったけどかなりの複雑さで普通にゲームになってしまった。\nGooglePlayで配信中！"},
      {id:"utpd",title:"Quilt Untyped (Browser JS) https://phi16.github.io/Quilt/untyped",desc:"圏論のStringDiagramをベースにラムダ計算をVisualizeしたもの。\nこれは階乗を計算するプログラム。UIから評価器まで全部自作です。"},
      {id:"gcha",title:"課金王者ガチャキング (Browser JS) https://trap.jp/post/183/",desc:"traPで開発していた作品。クライアントプログラム担当としていろいろと頑張りました。\nもともと面白い作品だったので開発のモチベが保てていて本当によかった。まだβなので頑張っていきます。"},
      {id:"mani",title:"Manifold (Browser Haskell/Haste, JS) https://phi16.github.io/Manifold",desc:"Toriの方式だと本当の射影空間が作れないので真面目に作り直した。\n結果距離関数で定義できる表面なら物理演算ができるというものができた。\nトーラス上の計量の違いみたいなのも表現できて楽しい。"},
      {id:"rnca",title:"Runica (Android, Kotlin)",desc:"Android用キーボード。Strokeの後継。\n元々は2タッチ準拠だったけど入力速度を上げるために配置をごちゃまぜにした。\n少なくとも前よりは速い。\nいろいろ直したいところがあるのでそのうち新しいのを作る。"},
      {id:"vcpk",title:"Vacuous Park (Unity, VRChat)",desc:"GPUパーティクルだけで出来た「虚無の遊園地」。\n観覧車は元々は盆踊りの為に作った物(それもまた奇妙だけど)で、折角なので乗れるようにもした。\n遠景はArea Xリスペクトで作ってみたらめちゃくちゃ綺麗になった。"},
      {id:"stir",title:"Stair Hall (Unity, VRChat) https://twitter.com/i/moments/1113143458682642432",desc:"無限回廊と箒のあるワールド。こういう風景をずっと見たいと思っていた。\n色んな問題に直面しつつもなんとか解決を見つけていって。すごいいい感じになりました。\n思い通りの空間が作れて満足です。飛ぶのめちゃくちゃたのしい。ちなみに写っているのはますきゃっとちゃんです。かわいい。"},
      {id:"do06",title:"D:0629 (Unity, VRChat) https://twitter.com/phi16_/status/1145993735705993223",desc:"某所での某の為に作ったもの。端的に言えばパーティクルコントローラ。\n音に合わせたり合わせなかったり、思った動きが出来るように諸々考えてUIを作った。\nでもそのポテンシャルが私の制御範囲を越えてしまっていてとても良い。またやっていきたい。"}
    ];
    const cont = $("#elems")[0];
    const elems = [];
    let numSum = 0;
    data.forEach(d=>{
      const div = document.createElement("div");
      div.className = "elem";
      div.style.width = div.style.height = "100px";
      const a = document.createElement("a");
      if(d.title){
        a.className = "item";
        a.rel = "item";
        if(d.desc){
          a["title"] = d.title + "\n" + d.desc;
        }else{
          a["title"] = d.title;
        }
      }
      a.href = d.ref ? d.ref : "/img/scsh/" + d.id + ".png";
      const img = document.createElement("img");
      img.src = "/img/scsh/" + d.id + "_t.png";
      img.width = "100";
      a.appendChild(img);
      div.appendChild(a);
      cont.appendChild(div);
      elems.push({s:d.size?d.size:1,p:(x,y,s)=>{
       div.style.left = x + "px";
       div.style.top = y + "px";
       div.style.width = div.style.height = s + "px";
       img.width = s;
      }});
      numSum += d.size ? d.size * d.size : 1;
    });
    $("a.item").fancybox({
      width:465,
      height:465,
      titlePosition: 'inside'
    });
    function resize() {
      let rightPad = 40;
      let measureW = cont.clientWidth - rightPad;
      let pad = 4;
      let maxW = Math.max(Math.floor((measureW+pad)/(100+pad)),1);
      let maxH = Math.ceil(numSum / maxW);
      let unit = Math.max((measureW+pad) / maxW, 104);
      let array = [];
      for(let i=0;i<maxH+2;i++) {
        let a = [];
        for(let j=0;j<maxW;j++) {
          a.push(false);
        }
        array.push(a);
      }
      function safe(x,y,s) {
        for(let i=0;i<s;i++) {
          if(y+i >= maxH+1) return false;
          for(let j=0;j<s;j++) {
            if(x+j >= maxW) return false;
            if(array[y+i][x+j]) return false;
          }
        }
        return true;
      }
      function fill(x,y,s) {
        for(let i=0;i<s;i++) {
          for(let j=0;j<s;j++) {
            array[y+j][x+i] = true;
          }
        }
        return true;
      }
      let curX = 0, curY = 0, bottom = 0;
      elems.forEach(e=>{
        let s = location.hash === "#unit" || maxW == 1 ? 1 : e.s;
        let cx = curX, cy = curY;
        while(!safe(cx,cy,s)) {
          cx++;
          if(cx == maxW) cx = 0, cy++;
        }
        fill(cx,cy,s);
        bottom = Math.max(bottom, cy+s);
        let px = cx*unit, py = cy*unit;
        let sz = unit*s - pad;
        e.p(px,py,sz);
        while(array[curY][curX]) {
          curX++;
          if(curX == maxW) curX = 0, curY++;
        }
      });
      cont.style.height = unit*bottom + "px";
    }
    resize();
    window.addEventListener("resize",resize);
  });
  </script>
</body>

</html>
